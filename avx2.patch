--- R-3.4.0/src/unix/dynload.c~	2017-03-23 23:04:04.000000000 +0000
+++ R-3.4.0/src/unix/dynload.c	2017-06-04 15:40:59.299784347 +0000
@@ -87,8 +87,21 @@
 {
     void *handle;
     int openFlag = 0;
+    char temppath[8192];
 
     openFlag = computeDLOpenFlag(asLocal, now);
+
+    sprintf(temppath, "%s.avx512", path);
+    if (access(temppath, R_OK) == 0 && __builtin_cpu_supports("avx512cd")) {
+	handle = (void *)dlopen(temppath, openFlag);
+	return handle;
+    }
+
+    sprintf(temppath, "%s.avx2", path);
+    if (access(temppath, R_OK) == 0 && __builtin_cpu_supports("avx2")) {
+	handle = (void *)dlopen(temppath, openFlag);
+	return handle;
+    }
     handle = (void *) dlopen(path,openFlag);
 
     return(handle);
